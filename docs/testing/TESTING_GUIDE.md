# Sixarms 完整測試指南

## 目錄

1. [環境設置](#環境設置)
2. [功能模組測試](#功能模組測試)
   - 專案管理、每日記錄、待辦事項、收件匣
   - AI 對話、Git 掃描、排程器、設定
   - 自動更新、使用者介面、鍵盤操作
3. [整合測試](#整合測試)
4. [效能測試](#效能測試)
5. [安全性測試](#安全性測試)
6. [跨平台測試](#跨平台測試)
7. [CI/CD 測試](#cicd-測試)

---

## 環境設置

### 開發環境需求

| 項目 | 版本要求 | 驗證命令 |
|------|----------|----------|
| Node.js | 20+ | `node --version` |
| Rust | 1.77+ | `rustc --version` |
| npm | 10+ | `npm --version` |
| Git | 2.0+ | `git --version` |
| GitHub CLI | 2.0+ | `gh --version` |

### 安裝與啟動

```bash
# 1. 安裝依賴
npm install

# 2. 開發模式運行
npm run tauri dev

# 3. 生產建構
npm run tauri build
```

### 驗證建構

```bash
# 前端建構
npm run build

# Rust 編譯檢查
cd src-tauri && cargo check

# 完整建構（含簽名）
TAURI_SIGNING_PRIVATE_KEY="..." npm run tauri build
```

---

## 功能模組測試

### 1. 專案管理 (Projects)

#### TC-P01: 新增專案

**步驟**:
1. 進入 Home 頁面
2. 點擊「Add Project」或「Browse」按鈕
3. 選擇本地 Git 專案資料夾
4. 確認專案新增

**驗證項目**:
- [ ] 專案卡片顯示在列表中
- [ ] 專案名稱正確顯示
- [ ] 專案路徑正確
- [ ] 狀態預設為 "Active"
- [ ] 資料庫有對應記錄

**API 驗證**:
```typescript
// 呼叫 create_project
invoke('create_project', { name: 'Test', path: '/path/to/repo' })
```

#### TC-P02: 瀏覽專案列表

**驗證項目**:
- [ ] 所有專案正確顯示
- [ ] 專案按最後更新時間排序
- [ ] 顯示專案統計（commits、活動天數等）
- [ ] 空狀態提示正確顯示

#### TC-P03: 更新專案狀態

**步驟**:
1. 點擊專案卡片的狀態選單
2. 選擇新狀態（Active/Paused/Archived）
3. 確認狀態更新

**驗證項目**:
- [ ] 狀態圖示正確變更
- [ ] 資料庫狀態同步更新
- [ ] Archived 專案可選擇隱藏

#### TC-P04: 刪除專案

**步驟**:
1. 點擊專案卡片的刪除按鈕
2. 確認刪除對話框
3. 確認刪除

**驗證項目**:
- [ ] 專案從列表移除
- [ ] 相關的 Daily Logs 被刪除
- [ ] 確認對話框有警告提示

---

### 2. 每日記錄 (Daily Logs)

#### TC-D01: 查看每日記錄

**位置**: Dashboard 頁面

**驗證項目**:
- [ ] 記錄按日期分組顯示
- [ ] 顯示分類標籤（Feature/Bugfix/Refactor 等）
- [ ] 顯示檔案變更數量
- [ ] 支援依專案篩選

#### TC-D02: 自動生成記錄

**前置條件**: 已設定 Grok API Key

**步驟**:
1. 開啟掃描排程
2. 等待自動掃描執行
3. 檢查新生成的記錄

**驗證項目**:
- [ ] 掃描到的 commits 自動分類
- [ ] AI 摘要正確生成
- [ ] 記錄時間戳正確

#### TC-D03: 手動分類覆寫

**步驟**:
1. 找到一筆記錄
2. 點擊分類標籤
3. 選擇新分類

**驗證項目**:
- [ ] 分類更新成功
- [ ] `user_override` 欄位記錄變更
- [ ] 原始 AI 分類保留

---

### 3. 待辦事項 (Todos)

#### TC-T01: 新增待辦

**步驟**:
1. 在待辦區塊輸入內容
2. 按 Enter 或點擊新增按鈕

**驗證項目**:
- [ ] 待辦項目新增成功
- [ ] 預設狀態為 Pending
- [ ] 可設定優先級
- [ ] 可關聯專案

#### TC-T02: 更新待辦狀態

**狀態流程**: Pending → In Progress → Completed

**驗證項目**:
- [ ] 狀態切換正常
- [ ] 已完成項目移至底部
- [ ] 支援取消（Cancelled）狀態

#### TC-T03: 刪除待辦

**驗證項目**:
- [ ] 確認刪除前有提示
- [ ] 刪除後列表更新

---

### 4. 收件匣 (Inbox)

#### TC-I01: 查看收件匣

**驗證項目**:
- [ ] 顯示所有未回答問題
- [ ] 問題按時間排序
- [ ] 顯示相關專案

#### TC-I02: 回答問題

**步驟**:
1. 選擇一個問題
2. 輸入回答
3. 提交

**驗證項目**:
- [ ] 問題標記為已回答
- [ ] 回答內容保存
- [ ] 從未回答列表移除

#### TC-I03: AI 生成問題

**前置條件**: 自動掃描開啟

**驗證項目**:
- [ ] AI 根據工作內容生成反思問題
- [ ] 問題與當日工作相關
- [ ] 問題有助於開發回顧

---

### 5. AI 對話 (Chat)

#### TC-C01: API Key 設定

**步驟**:
1. 進入 Settings 頁面
2. 輸入 Grok API Key
3. 保存設定

**驗證項目**:
- [ ] API Key 安全儲存在 Keychain
- [ ] 顯示 Key 已設定狀態
- [ ] 可刪除已存 Key

#### TC-C02: 基本對話

**前置條件**: API Key 已設定

**步驟**:
1. 進入 Chat 頁面
2. 輸入訊息
3. 等待 AI 回覆

**驗證項目**:
- [ ] 訊息發送成功
- [ ] AI 回覆正常顯示
- [ ] 對話歷史保留
- [ ] 支援 Markdown 格式

#### TC-C03: 上下文對話

**驗證項目**:
- [ ] AI 記住對話上下文
- [ ] 可詢問專案相關問題
- [ ] 可請求程式碼建議

#### TC-C04: 錯誤處理

**測試場景**:
1. 無效 API Key
2. 網路斷線
3. API 限流

**驗證項目**:
- [ ] 錯誤訊息清晰顯示
- [ ] 支援重試機制
- [ ] 不會導致應用崩潰

---

### 6. Git 掃描器 (Scanner)

#### TC-S01: 掃描今日 Commits

**步驟**:
1. 確保專案有今日 commits
2. 點擊「Scan Today」或等待自動掃描

**驗證項目**:
- [ ] 正確識別今日 commits
- [ ] 擷取 commit message
- [ ] 識別變更檔案

#### TC-S02: 掃描日期範圍

**API 驗證**:
```typescript
invoke('scan_range', {
  path: '/path/to/repo',
  startDate: '2026-01-01',
  endDate: '2026-01-03'
})
```

**驗證項目**:
- [ ] 日期篩選正確
- [ ] 跨日 commits 正確分組

#### TC-S03: 未提交變更檢測

**驗證項目**:
- [ ] 顯示未提交的檔案
- [ ] 區分 staged/unstaged
- [ ] 顯示變更類型（新增/修改/刪除）

#### TC-S04: 分支資訊

**驗證項目**:
- [ ] 正確顯示當前分支
- [ ] 識別 Git 倉庫狀態

---

### 7. 排程器 (Scheduler)

#### TC-SC01: 啟動排程

**步驟**:
1. 進入 Settings
2. 開啟 Scan Settings
3. 設定掃描間隔
4. 啟用排程

**驗證項目**:
- [ ] 排程器狀態顯示「Running」
- [ ] 顯示下次掃描時間
- [ ] 按間隔自動執行

#### TC-SC02: 手動觸發掃描

**步驟**:
1. 點擊「Trigger Manual Scan」

**驗證項目**:
- [ ] 立即執行掃描
- [ ] Toast 通知掃描結果
- [ ] 不影響排程計時

#### TC-SC03: 停止排程

**驗證項目**:
- [ ] 排程器停止
- [ ] 狀態更新為「Stopped」
- [ ] 設定保留

#### TC-SC04: 啟動時自動掃描

**設定**: `scan_on_startup: true`

**驗證項目**:
- [ ] 應用啟動後 2 秒內開始掃描
- [ ] 掃描結果正確顯示

---

### 8. 設定 (Settings)

#### TC-SET01: 通知設定

**選項**:
- Daily Summary
- Todo Reminder
- Stale Project Warning

**驗證項目**:
- [ ] 設定保存成功
- [ ] 重啟後設定保留
- [ ] 通知按設定觸發

#### TC-SET02: 掃描設定

**選項**:
- 啟用/停用
- 掃描間隔（分鐘）
- 啟動時掃描
- 自動分類
- 自動摘要

**驗證項目**:
- [ ] 間隔設定生效
- [ ] 自動分類依設定執行
- [ ] 設定即時套用

#### TC-SET03: 主題設定

**驗證項目**:
- [ ] 深色/淺色主題切換
- [ ] 設定保存
- [ ] UI 正確更新

---

### 9. 自動更新 (Auto-Update)

參考 [AUTO_UPDATE_TESTING.md](./AUTO_UPDATE_TESTING.md)

---

### 10. 使用者介面 (UI/UX)

#### TC-UI01: Logo 與品牌識別

**驗證項目**:
- [ ] Sidebar 顯示 Sixarms logo（六角形設計）
- [ ] 瀏覽器 favicon 使用 logo.svg
- [ ] 展開 Sidebar 時顯示「SIXARMS」文字
- [ ] Logo 顏色為 cyan 漸層（#22d3ee → #0891b2）

#### TC-UI02: 響應式設計

**驗證項目**:
- [ ] 視窗最小尺寸 800x600 正常顯示
- [ ] Sidebar 懸停展開/收合流暢
- [ ] 主內容區域適應視窗大小
- [ ] 卡片佈局在不同寬度下正確排列

#### TC-UI03: 動畫效果

**驗證項目**:
- [ ] 頁面切換動畫流暢
- [ ] Sidebar 展開動畫無延遲
- [ ] 卡片 hover 效果正常
- [ ] Loading skeleton 動畫顯示

#### TC-UI04: 主題一致性

**驗證項目**:
- [ ] 深色主題配色統一
- [ ] accent-cyan 用於主要互動元素
- [ ] accent-rose 用於警告/徽章
- [ ] 文字對比度符合可讀性標準

#### TC-UI05: Toast 通知

**驗證項目**:
- [ ] 成功操作顯示綠色 toast
- [ ] 錯誤操作顯示紅色 toast
- [ ] Toast 自動消失（3 秒）
- [ ] 多個 toast 正確堆疊

---

### 11. 鍵盤操作

#### TC-KB01: 導航快捷鍵

**驗證項目**:
- [ ] Tab 鍵可遍歷所有互動元素
- [ ] Enter 鍵可觸發按鈕操作
- [ ] Escape 鍵可關閉對話框

#### TC-KB02: 輸入欄位

**驗證項目**:
- [ ] TODO 輸入框按 Enter 送出
- [ ] Chat 輸入框按 Enter 發送訊息
- [ ] 搜尋欄位支援即時篩選

---

## 整合測試

### IT-01: 完整工作流程

**場景**: 開發者一天的工作流程

**步驟**:
1. 啟動應用程式
2. 新增專案
3. 執行掃描
4. 檢視 Dashboard 的活動統計
5. 與 AI 對話討論程式碼
6. 新增待辦事項
7. 回答 Inbox 問題
8. 檢視更新通知

**驗證項目**:
- [ ] 各功能無縫銜接
- [ ] 資料正確同步
- [ ] 無錯誤或崩潰

### IT-02: 多專案管理

**場景**: 同時管理多個專案

**驗證項目**:
- [ ] 專案間切換流暢
- [ ] 資料不會混淆
- [ ] 篩選功能正常

### IT-03: 離線使用

**場景**: 無網路連接

**驗證項目**:
- [ ] 本地功能正常（專案、記錄、待辦）
- [ ] AI 功能顯示適當錯誤
- [ ] 重新連線後恢復正常

---

## 效能測試

### PT-01: 啟動時間

**目標**: < 3 秒

**測量方式**:
```bash
time npm run tauri dev
```

### PT-02: 大量資料處理

**場景**: 100+ 專案、1000+ 記錄

**驗證項目**:
- [ ] 列表捲動流暢
- [ ] 搜尋響應 < 500ms
- [ ] 記憶體使用穩定

### PT-03: 掃描效能

**目標**: 單一專案掃描 < 5 秒

**驗證項目**:
- [ ] 大型專案不會 timeout
- [ ] 掃描期間 UI 響應正常

---

## 安全性測試

### SEC-01: API Key 安全

**驗證項目**:
- [ ] Key 儲存在系統 Keychain
- [ ] Key 不出現在日誌中
- [ ] Key 不可透過 DevTools 取得

### SEC-02: 資料存取

**驗證項目**:
- [ ] SQLite 資料庫權限正確
- [ ] 僅讀取授權的專案目錄
- [ ] 無越權檔案存取

### SEC-03: 更新安全

**驗證項目**:
- [ ] 更新包已簽名
- [ ] 簽名驗證正確
- [ ] 無法安裝未簽名更新

---

## 跨平台測試

### CP-01: macOS (ARM / Intel)

**測試環境**: macOS 13.0+ (Ventura 或更新)

**驗證項目**:
- [ ] 應用程式正確啟動
- [ ] 視窗標題列樣式正確（Overlay 模式）
- [ ] 系統選單整合正常
- [ ] Keychain 存取正常（API Key 儲存）
- [ ] 系統通知正確顯示
- [ ] 自動更新下載安裝正常

**特定測試**:
- [ ] ARM (M1/M2): `Sixarms_aarch64.dmg` 安裝
- [ ] Intel: `Sixarms_x64.dmg` 安裝

### CP-02: Windows

**測試環境**: Windows 10/11 (64-bit)

**驗證項目**:
- [ ] 安裝程式執行正常（`Sixarms_x64-setup.exe`）
- [ ] 開始選單捷徑正確建立
- [ ] 系統托盤通知正常
- [ ] Windows Credential Manager 整合
- [ ] 高 DPI 顯示正確縮放

### CP-03: Linux

**測試環境**: Ubuntu 22.04 / Fedora 38+

**驗證項目**:
- [ ] AppImage 執行正常
- [ ] 桌面整合正常
- [ ] 系統通知（libnotify）正常
- [ ] 權限設定正確

**安裝測試**:
```bash
# AppImage
chmod +x Sixarms_0.1.0_amd64.AppImage
./Sixarms_0.1.0_amd64.AppImage

# Debian/Ubuntu
sudo dpkg -i sixarms_0.1.0_amd64.deb

# Fedora/RHEL
sudo rpm -i Sixarms-0.1.0-1.x86_64.rpm
```

---

## CI/CD 測試

### CD-01: 自動建構

**觸發**: Push tag `v*`

**驗證項目**:
- [ ] 4 平台建構成功
- [ ] 產物正確上傳
- [ ] Release 草稿創建

### CD-02: 簽名驗證

**驗證項目**:
- [ ] 所有安裝檔有 `.sig` 簽名
- [ ] 簽名可驗證

### CD-03: 更新清單

**驗證項目**:
- [ ] `latest.json` 正確生成
- [ ] URL 指向正確版本
- [ ] 平台資訊完整

---

## 測試報告模板

```markdown
## 測試報告

**日期**: YYYY-MM-DD
**版本**: v0.x.x
**測試人員**:

### 測試環境
- OS:
- Node:
- Rust:

### 測試結果摘要

| 模組 | 通過 | 失敗 | 跳過 |
|------|------|------|------|
| 專案管理 | | | |
| 每日記錄 | | | |
| 待辦事項 | | | |
| 收件匣 | | | |
| AI 對話 | | | |
| Git 掃描 | | | |
| 排程器 | | | |
| 設定 | | | |
| 自動更新 | | | |

### 發現的問題

| ID | 嚴重度 | 描述 | 狀態 |
|----|--------|------|------|
| | | | |

### 建議事項

1.
2.
```

---

## 快速測試指令

```bash
# 開發環境啟動
npm run tauri dev

# 前端類型檢查
npm run build

# Rust 編譯檢查
cd src-tauri && cargo check

# 查看 CI/CD 狀態
gh run list --repo 888wing/sixarms

# 創建新版本
git tag v0.x.x && git push origin v0.x.x
```
